/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.8
* Updated: June 1st, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(n){n.fn.slides=function(t){return t=n.extend({},n.fn.slides.option,t),this.each(function(){function c(f,c,a){if(!h&&b){h=!0;t.animationStart(o+1);switch(f){case"next":s=o;u=o+1;u=l===u?0:u;y=e*2;f=-e*2;o=u;break;case"prev":s=o;u=o-1;u=u===-1?l-1:u;y=0;f=0;o=u;break;case"pagination":u=parseInt(a,10);s=n("."+t.paginationClass+" li."+t.currentClass+" a",r).attr("href").match("[^#/]+$");u>s?(y=e*2,f=-e*2):(y=0,f=0);o=u}c==="fade"?t.crossfade?i.children(":eq("+u+")",r).css({zIndex:10}).fadeIn(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?i.animate({height:i.children(":eq("+u+")",r).outerHeight()},t.autoHeightSpeed,function(){i.children(":eq("+s+")",r).css({display:"none",zIndex:0});i.children(":eq("+u+")",r).css({zIndex:0});t.animationComplete(u+1);h=!1}):(i.children(":eq("+s+")",r).css({display:"none",zIndex:0}),i.children(":eq("+u+")",r).css({zIndex:0}),t.animationComplete(u+1),h=!1)}):i.children(":eq("+s+")",r).fadeOut(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?i.animate({height:i.children(":eq("+u+")",r).outerHeight()},t.autoHeightSpeed,function(){i.children(":eq("+u+")",r).fadeIn(t.fadeSpeed,t.fadeEasing)}):i.children(":eq("+u+")",r).fadeIn(t.fadeSpeed,t.fadeEasing,function(){n.browser.msie&&n(this).get(0).style.removeAttribute("filter")});t.animationComplete(u+1);h=!1}):(i.children(":eq("+u+")").css({left:y,display:"block"}),t.autoHeight?i.animate({left:f,height:i.children(":eq("+u+")").outerHeight()},t.slideSpeed,t.slideEasing,function(){i.css({left:-e});i.children(":eq("+u+")").css({left:e,zIndex:5});i.children(":eq("+s+")").css({left:e,display:"none",zIndex:0});t.animationComplete(u+1);h=!1;n(window).resize()}):i.animate({left:f},t.slideSpeed,t.slideEasing,function(){i.css({left:-e});i.children(":eq("+u+")").css({left:e,zIndex:5});i.children(":eq("+s+")").css({left:e,display:"none",zIndex:0});t.animationComplete(u+1);h=!1}));t.pagination&&(n("."+t.paginationClass+" li."+t.currentClass,r).removeClass(t.currentClass),n("."+t.paginationClass+" li:eq("+u+")",r).addClass(t.currentClass))}}function tt(){clearInterval(r.data("interval"))}function p(){t.pause?(clearTimeout(r.data("pause")),clearInterval(r.data("interval")),nt=setTimeout(function(){clearTimeout(r.data("pause"));k=setInterval(function(){c("next",a)},t.play);r.data("interval",k)},t.pause),r.data("pause",nt)):tt()}var it;n("."+t.container,n(this)).children().wrapAll('<div class="slides_control"/>');var r=n(this),i=n(".slides_control",r),l=i.children().size(),e=i.children().outerWidth(),rt=i.children().outerHeight(),f=t.start-1,a=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],d=t.effect.indexOf(",")<0?a:t.effect.replace(" ","").split(",")[1],u=0,s=0,w=0,o=0,b,h,v,y,g,nt,k;if(l<2)return n("."+t.container,n(this)).fadeIn(t.fadeSpeed,t.fadeEasing,function(){b=!0;t.slidesLoaded()}),n("."+t.next+", ."+t.prev).fadeOut(0),!1;l<2||(f<0&&(f=0),f>l&&(f=l-1),t.start&&(o=f),t.randomize&&i.randomize(),n("."+t.container,r).css({overflow:"hidden",position:"relative"}),i.children().css({position:"absolute",top:0,left:i.children().outerWidth(),width:i.children().outerWidth(),zIndex:0,display:"none"}),i.css({position:"relative",width:e*3,height:rt,left:-e}),n("."+t.container,r).css({display:"block"}),t.autoHeight&&(i.children().css({height:"auto"}),i.animate({height:i.children(":eq("+f+")").outerHeight()},t.autoHeightSpeed)),t.preload&&i.find("img:eq("+f+")").length?(n("."+t.container,r).css({background:"url("+t.preloadImage+") no-repeat 50% 50%"}),it=i.find("img:eq("+f+")").attr("src")+"?"+(new Date).getTime(),g=n("img",r).parent().attr("class")!="slides_control"?i.children(":eq(0)")[0].tagName.toLowerCase():i.find("img:eq("+f+")"),i.find("img:eq("+f+")").attr("src",it).load(function(){i.find(g+":eq("+f+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){n(this).css({zIndex:5});n("."+t.container,r).css({background:""});b=!0;t.slidesLoaded()})})):i.children(":eq("+f+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){b=!0;t.slidesLoaded()}),t.bigTarget&&(i.children().css({cursor:"pointer"}),i.children().click(function(){return c("next",a),!1})),t.hoverPause&&t.play&&(i.bind("mouseover",function(){tt()}),i.bind("mouseleave",function(){p()})),t.generateNextPrev&&(n("."+t.container,r).after('<a href="#" class="'+t.prev+'">Prev<\/a>'),n("."+t.prev,r).after('<a href="#" class="'+t.next+'">Next<\/a>')),n("."+t.next,r).click(function(n){n.preventDefault();t.play&&p();c("next",a)}),n("."+t.prev,r).click(function(n){n.preventDefault();t.play&&p();c("prev",a)}),t.generatePagination?(t.prependPagination?r.prepend("<ul class="+t.paginationClass+"><\/ul>"):r.append("<ul class="+t.paginationClass+"><\/ul>"),i.children().each(function(){n("."+t.paginationClass,r).append('<li><a href="#'+w+'"><\/a><\/li>');w++})):n("."+t.paginationClass+" li a",r).each(function(){n(this).attr("href","#"+w);w++}),n("."+t.paginationClass+" li:eq("+f+")",r).addClass(t.currentClass),n("."+t.paginationClass+" li a",r).click(function(){return t.play&&p(),v=n(this).attr("href").match("[^#/]+$"),o!=v&&c("pagination",d,v),!1}),n("a.link",r).click(function(){return t.play&&p(),v=n(this).attr("href").match("[^#/]+$")-1,o!=v&&c("pagination",d,v),!1}),n(window).bind("resize",function(){i.children().each(function(){n(this).css({width:r.width()})});i.find(".slide-full-width").each(function(){n(this).css({width:r.width()})})}),t.play&&(k=setInterval(function(){c("next",a)},t.play),r.data("interval",k)))})};n.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};n.fn.randomize=function(t){function r(){return Math.round(Math.random())-.5}return n(this).each(function(){var e=n(this),f=e.children(),o=f.length,u;if(o>1){for(f.hide(),u=[],i=0;i<o;i++)u[u.length]=i;u=u.sort(r);n.each(u,function(n,i){var r=f.eq(i),u=r.clone(!0);u.show().appendTo(e);t!==undefined&&t(r,u);r.remove()})}})}})(jQuery);